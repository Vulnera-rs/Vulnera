//! Cache service trait for vulnerability analysis
//!
//! This module defines the application-level cache service trait.
//! The concrete implementation is in the infrastructure layer.

use async_trait::async_trait;
use std::time::Duration;

use crate::application::errors::ApplicationError;

/// Service for managing caching strategies
/// Note: This trait is not dyn-compatible due to generic methods
/// so we'll use concrete implementations instead of trait objects in the application layer.
#[async_trait]
pub trait CacheService: Send + Sync {
    async fn get<T>(&self, key: &str) -> Result<Option<T>, ApplicationError>
    where
        T: serde::de::DeserializeOwned + Send;

    async fn set<T>(&self, key: &str, value: &T, ttl: Duration) -> Result<(), ApplicationError>
    where
        T: serde::Serialize + Send + Sync;

    async fn invalidate(&self, key: &str) -> Result<(), ApplicationError>;
}
